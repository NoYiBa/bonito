<div ng-controller='ServicesListCtrl as app'>
  <navbar>
    <!-- this goes into the sub-navbar -->
    <ul class="nav navbar-nav navbar-right">
      <li>
        <form class="panels-quick-filter has-feedback">
          <div class="form-group">
            <input type="search" class="form-control input-sm"
              placeholder="Filter services.." ng-model="app.filter" ng-change="app.updateFilter()" />
              <i class="fa fa-search form-control-feedback"></i>
          </div>
        </form>
      </li>
      <li>
        <div class="right-buttons">
          <button type="button" class="btn btn-link"
              tooltip="Settings" tooltip-placement="bottom"
              ng-click="app.configToggle()">
            <i class="fa fa-2x fa-cog"></i>
          </button>
        </div>
      </li>
    </ul>
  </navbar>

  <config visible="app.configVisible">
    <ng-include src="'services-list-config.html'"></ng-include>
  </config>

  <div class="services-list container-fluid"
       infinite-scroll='app.loadMore()' infinite-scroll-distance="1">

    <div ng-repeat="panel in app.panels" class="bpanel"
        ng-style="{width: app.panelWidth + 'px'}">

      <div class="bpanel-header">
        <span class="name">
          {{ panel.name }}
        </span>
      </div>

      <svggraph height="app.panelHeight" data="panel.values"></svggraph>

        <table class="table table-condensed" style="width:50%;float:left">
          <tr>
            <th>Volume</th>
            <td><span ng-class="panel.size|humanNumberClass">{{ panel.size|humanNumber }}/s</span></td>
          </tr>
          <tr>
            <th>Hosts</th>
            <td>42</td>
          </tr>
          <tr>
            <th>Per Host</th>
            <td><span ng-class="panel.size/42|humanNumberClass">{{ panel.size/42|humanNumber:0 }}</span></td>
          </tr>
          <tr>
            <th>Errors/1K</th>
            <td><span ng-class="panel.errors|humanNumberClass">{{ panel.errors|humanNumber:0 }}</span></td>
          </tr>
        </table>
        <table class="table table-condensed" style="width:50%;">
          <tr>
            <th>Max</th>
            <td>{{ panel.rt_max|humanDuration }}</td>
          </tr>
          <tr>
            <th>99p</th>
            <td>{{ panel.rt_99p|humanDuration }}</td>
          </tr>
          <tr>
            <th>95p</th>
            <td>{{ panel.rt_95p|humanDuration }}</td>
          </tr>
          <tr>
            <th>50p</th>
            <td>{{ panel.rt_50p|humanDuration }}</td>
          </tr>
          <tr>
            <th>Mean</th>
            <td>{{ panel.rt_avg|humanDuration }}</td>
          </tr>
        </table>

    </div>

    <!-- required by the infinite-scroll to correctly get it's height. See FAQ -->
    <div style='clear: both;'></div>
  </div>

</div>
